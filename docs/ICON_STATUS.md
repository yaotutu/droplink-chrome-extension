# 图标状态指示

扩展图标右下角的徽章会显示当前连接状态：

## 徽章含义

| 徽章 | 颜色 | 状态 | 说明 |
|------|------|------|------|
| ● | 🟢 绿色 | 已连接 | 已成功连接到 Gotify 服务器 |
| ● | 🟡 黄色 | 连接中 | 正在连接到服务器 |
| ● | 🟠 橙色 | 重连中 | 连接断开，正在尝试重新连接 |
| ! | 🔴 红色 | 错误 | 连接出错 |
| ● | ⚪ 灰色 | 未连接 | 未建立连接（已禁用或配置无效） |
| (无) | - | 配置无效 | 配置信息不完整或未启用 |

## 实现细节

### 文件
- `src/background/icon-manager.ts` - 图标管理器
- `src/background/connection-manager.ts` - 集成图标更新

### 工作原理
1. 连接管理器监听状态变化
2. 状态变化时调用图标管理器更新徽章
3. 使用 `chrome.action.setBadgeText` 和 `setBadgeBackgroundColor` API

### 触发时机
- 扩展初始化时
- 连接状态变化时（连接中、已连接、重连中、错误、断开）
- 配置有效性变化时
- 手动断开连接时
