# GitHub Actions è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒæŒ‡å—

æœ¬é¡¹ç›®é…ç½®äº†ä¸‰ä¸ª GitHub Actions workflowï¼Œç”¨äºè‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ Chrome æ‰©å±•ã€‚

## ğŸ“‹ Workflow æ¦‚è§ˆ

| Workflow | è§¦å‘æ¡ä»¶ | Release Tag | ç”¨é€” |
|----------|---------|-------------|------|
| **dev-build.yml** | æ¨é€åˆ° `dev` åˆ†æ”¯ | `dev-latest` | å¼€å‘æµ‹è¯•ç‰ˆæœ¬ï¼Œè‡ªåŠ¨è¦†ç›–æ›´æ–° |
| **main-build.yml** | æ¨é€åˆ° `main` åˆ†æ”¯ | `main-latest` | æ­£å¼ç¨³å®šç‰ˆæœ¬ï¼Œè‡ªåŠ¨è¦†ç›–æ›´æ–° |
| **release.yml** | åˆ›å»º `v*` tag | å¯¹åº”çš„ tag | ç‰ˆæœ¬åŒ–å‘å¸ƒï¼Œæ°¸ä¹…ä¿ç•™ |

---

## ğŸš€ è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ

### 1. Dev å¼€å‘ç‰ˆï¼ˆdev-latestï¼‰

**è§¦å‘æ–¹å¼**ï¼š
```bash
git checkout dev
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push origin dev
```

**æ•ˆæœ**ï¼š
- è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° `dev-latest` Release
- æ¯æ¬¡æ¨é€éƒ½ä¼š**è¦†ç›–**ä¹‹å‰çš„ Release
- å›ºå®šä¸‹è½½é“¾æ¥æ°¸ä¹…æœ‰æ•ˆ

**å›ºå®šä¸‹è½½é“¾æ¥**ï¼š
```
https://github.com/yaotutu/droplink/releases/download/dev-latest/droplink-dev-{VERSION}.zip
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ ‡è®°ä¸ºé¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆprereleaseï¼‰
- âœ… é€‚åˆæµ‹è¯•æœ€æ–°åŠŸèƒ½
- âœ… å¯èƒ½åŒ…å«æœªå®Œæˆçš„åŠŸèƒ½æˆ– Bug

---

### 2. Main æ­£å¼ç‰ˆï¼ˆmain-latestï¼‰

**è§¦å‘æ–¹å¼**ï¼š
```bash
git checkout main
git merge dev  # æˆ–ç›´æ¥åœ¨ main åˆ†æ”¯å¼€å‘
git push origin main
```

**æ•ˆæœ**ï¼š
- è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° `main-latest` Release
- æ¯æ¬¡æ¨é€éƒ½ä¼š**è¦†ç›–**ä¹‹å‰çš„ Release
- å›ºå®šä¸‹è½½é“¾æ¥æ°¸ä¹…æœ‰æ•ˆ

**å›ºå®šä¸‹è½½é“¾æ¥**ï¼š
```
https://github.com/yaotutu/droplink/releases/download/main-latest/droplink-release-{VERSION}.zip
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ ‡è®°ä¸ºæ­£å¼ç‰ˆæœ¬ï¼ˆé prereleaseï¼‰
- âœ… å·²é€šè¿‡å®Œæ•´æµ‹è¯•
- âœ… æ¨èç»™æ™®é€šç”¨æˆ·ä½¿ç”¨

---

### 3. ç‰ˆæœ¬åŒ–å‘å¸ƒï¼ˆv1.0.0, v1.1.0 ç­‰ï¼‰

**è§¦å‘æ–¹å¼**ï¼š
```bash
# åˆ›å»ºå¹¶æ¨é€ tag
git tag v1.0.0
git push origin v1.0.0
```

**æ•ˆæœ**ï¼š
- åˆ›å»ºä¸€ä¸ª**æ°¸ä¹…ä¿ç•™**çš„ Release
- ä¸ä¼šè¦†ç›– `dev-latest` å’Œ `main-latest`
- é€‚åˆé‡è¦ç‰ˆæœ¬çš„å½’æ¡£

**ä¸‹è½½é“¾æ¥**ï¼š
```
https://github.com/yaotutu/droplink/releases/download/v1.0.0/droplink-v1.0.0.zip
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ°¸ä¹…ä¿ç•™ï¼Œä¸ä¼šè¢«è¦†ç›–
- âœ… é€‚åˆé‡è¦ç‰ˆæœ¬çš„å½’æ¡£
- âœ… å¯ä»¥å›æº¯åˆ°ä»»ä½•å†å²ç‰ˆæœ¬

---

## ğŸ“¦ ç‰ˆæœ¬å·ç­–ç•¥

æ‰€æœ‰ workflow ä½¿ç”¨**ç»Ÿä¸€çš„ç‰ˆæœ¬å·ç­–ç•¥**ï¼š

```
ç‰ˆæœ¬å· = 1.0.{Git æäº¤æ€»æ•°}
```

**ç¤ºä¾‹**ï¼š
- ç¬¬ 100 æ¬¡æäº¤ï¼š`1.0.100`
- ç¬¬ 150 æ¬¡æäº¤ï¼š`1.0.150`
- ç¬¬ 200 æ¬¡æäº¤ï¼š`1.0.200`

**ä¼˜åŠ¿**ï¼š
- âœ… ç‰ˆæœ¬å·å•è°ƒé€’å¢
- âœ… dev å’Œ main åˆ†æ”¯ç‰ˆæœ¬å·ä¸€è‡´ï¼ˆåŸºäºç›¸åŒçš„æäº¤å†å²ï¼‰
- âœ… æ— éœ€æ‰‹åŠ¨ç®¡ç†ç‰ˆæœ¬å·
- âœ… å¯ä»¥é€šè¿‡ç‰ˆæœ¬å·å¿«é€Ÿå®šä½æäº¤

---

## ğŸ”— å›ºå®šä¸‹è½½é“¾æ¥çš„ä½¿ç”¨

### ä¸ºä»€ä¹ˆä½¿ç”¨å›ºå®š Tagï¼Ÿ

ä½¿ç”¨ `dev-latest` å’Œ `main-latest` ä½œä¸ºå›ºå®š tagï¼Œæ¯æ¬¡æ¨é€æ—¶è¦†ç›–æ›´æ–°ï¼Œè¿™æ ·ï¼š

1. **ä¸‹è½½é“¾æ¥æ°¸ä¹…æœ‰æ•ˆ**ï¼šæ— éœ€æ¯æ¬¡æ›´æ–°ç‰ˆæœ¬å·
2. **ç”¨æˆ·ä½“éªŒæ›´å¥½**ï¼šç”¨æˆ·åªéœ€è®°ä½ä¸€ä¸ªé“¾æ¥
3. **è‡ªåŠ¨åŒ–å‹å¥½**ï¼šè„šæœ¬å¯ä»¥ç›´æ¥ä½¿ç”¨å›ºå®šé“¾æ¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬

### åœ¨ä¸‹è½½é¡µé¢ä¸­ä½¿ç”¨

ä½ å¯ä»¥åœ¨é¡¹ç›®çš„ä¸‹è½½é¡µé¢ä¸­ä½¿ç”¨è¿™äº›å›ºå®šé“¾æ¥ï¼š

```html
<!-- Dev å¼€å‘ç‰ˆ -->
<a href="https://github.com/yaotutu/droplink/releases/tag/dev-latest">
  ä¸‹è½½ Dev å¼€å‘ç‰ˆï¼ˆæœ€æ–°ï¼‰
</a>

<!-- Main æ­£å¼ç‰ˆ -->
<a href="https://github.com/yaotutu/droplink/releases/tag/main-latest">
  ä¸‹è½½æ­£å¼ç‰ˆï¼ˆæœ€æ–°ç¨³å®šç‰ˆï¼‰
</a>
```

### ç›´æ¥ä¸‹è½½é“¾æ¥

å¦‚æœéœ€è¦ç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼ˆä¸è·³è½¬åˆ° Release é¡µé¢ï¼‰ï¼š

```bash
# Dev å¼€å‘ç‰ˆ
wget https://github.com/yaotutu/droplink/releases/download/dev-latest/droplink-dev-1.0.100.zip

# Main æ­£å¼ç‰ˆ
wget https://github.com/yaotutu/droplink/releases/download/main-latest/droplink-release-1.0.100.zip
```

**æ³¨æ„**ï¼šæ–‡ä»¶åä¸­çš„ç‰ˆæœ¬å·ä¼šéšç€æ¯æ¬¡æ„å»ºè€Œå˜åŒ–ï¼Œä½† tag åç§°ï¼ˆ`dev-latest` å’Œ `main-latest`ï¼‰ä¿æŒä¸å˜ã€‚

---

## ğŸ› ï¸ æ‰‹åŠ¨è§¦å‘æ„å»º

æ‰€æœ‰ workflow éƒ½æ”¯æŒæ‰‹åŠ¨è§¦å‘ï¼š

1. æ‰“å¼€ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡» **Actions** æ ‡ç­¾
3. é€‰æ‹©è¦è¿è¡Œçš„ workflow
4. ç‚¹å‡» **Run workflow** æŒ‰é’®
5. é€‰æ‹©åˆ†æ”¯å¹¶ç‚¹å‡» **Run workflow**

---

## ğŸ“Š æ„å»ºä¿¡æ¯

æ¯æ¬¡æ„å»ºå®Œæˆåï¼Œä½ å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹æ„å»ºä¿¡æ¯ï¼š

### 1. GitHub Actions é¡µé¢
- æŸ¥çœ‹æ„å»ºæ—¥å¿—
- æŸ¥çœ‹æ„å»ºæ‘˜è¦ï¼ˆåŒ…å«å›ºå®šä¸‹è½½é“¾æ¥ï¼‰
- ä¸‹è½½æ„å»ºäº§ç‰©ï¼ˆArtifactsï¼‰

### 2. Release é¡µé¢
- æŸ¥çœ‹ Release è¯´æ˜
- ä¸‹è½½æ„å»ºçš„ zip æ–‡ä»¶
- æŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯å’Œæäº¤è®°å½•

### 3. æ„å»ºäº§ç‰©ï¼ˆArtifactsï¼‰
- Dev ç‰ˆæœ¬ä¿ç•™ 30 å¤©
- Main ç‰ˆæœ¬ä¿ç•™ 90 å¤©
- å¯ä»¥åœ¨ Actions é¡µé¢ä¸‹è½½

---

## ğŸ”„ å·¥ä½œæµç¨‹å»ºè®®

### æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. åœ¨ dev åˆ†æ”¯å¼€å‘æ–°åŠŸèƒ½
git checkout dev
git add .
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git push origin dev
# â†’ è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° dev-latest

# 2. æµ‹è¯•é€šè¿‡åï¼Œåˆå¹¶åˆ° main åˆ†æ”¯
git checkout main
git merge dev
git push origin main
# â†’ è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° main-latest

# 3. é‡è¦ç‰ˆæœ¬æ‰“ tag
git tag v1.0.0
git push origin v1.0.0
# â†’ åˆ›å»ºç‰ˆæœ¬åŒ– Releaseï¼ˆæ°¸ä¹…ä¿ç•™ï¼‰
```

### å¿«é€Ÿä¿®å¤æµç¨‹

```bash
# 1. åœ¨ main åˆ†æ”¯ç›´æ¥ä¿®å¤
git checkout main
git add .
git commit -m "fix: ä¿®å¤ç´§æ€¥ Bug"
git push origin main
# â†’ è‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒåˆ° main-latest

# 2. åŒæ­¥åˆ° dev åˆ†æ”¯
git checkout dev
git merge main
git push origin dev
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç‰ˆæœ¬å·ç®¡ç†
- ç‰ˆæœ¬å·ç”± Git æäº¤æ€»æ•°è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ `package.json`
- æ„å»ºæ—¶ä¼šä¸´æ—¶æ›´æ–° `package.json` çš„ç‰ˆæœ¬å·ï¼Œä½†ä¸ä¼šæäº¤åˆ°ä»“åº“

### 2. Release è¦†ç›–
- `dev-latest` å’Œ `main-latest` ä¼šè¢«æ¯æ¬¡æ¨é€è¦†ç›–
- å¦‚æœéœ€è¦ä¿ç•™ç‰¹å®šç‰ˆæœ¬ï¼Œè¯·ä½¿ç”¨ tag åˆ›å»ºç‰ˆæœ¬åŒ– Release

### 3. ä¸‹è½½é“¾æ¥
- å›ºå®š tag çš„ä¸‹è½½é“¾æ¥æ°¸ä¹…æœ‰æ•ˆ
- æ–‡ä»¶åä¸­çš„ç‰ˆæœ¬å·ä¼šå˜åŒ–ï¼Œä½† tag åç§°ä¸å˜
- å»ºè®®åœ¨ä¸‹è½½é¡µé¢ä½¿ç”¨ Release é¡µé¢é“¾æ¥ï¼Œè€Œä¸æ˜¯ç›´æ¥æ–‡ä»¶ä¸‹è½½é“¾æ¥

### 4. æ„å»ºæ—¶é—´
- æ¯æ¬¡æ„å»ºå¤§çº¦éœ€è¦ 2-3 åˆ†é’Ÿ
- å¯ä»¥åœ¨ Actions é¡µé¢æŸ¥çœ‹æ„å»ºè¿›åº¦

---

## ğŸ“ ç¤ºä¾‹ï¼šåœ¨ç½‘ç«™ä¸­ä½¿ç”¨

### HTML ä¸‹è½½é¡µé¢

```html
<!DOCTYPE html>
<html>
<head>
  <title>Droplink ä¸‹è½½</title>
</head>
<body>
  <h1>Droplink Chrome Extension ä¸‹è½½</h1>

  <h2>æ­£å¼ç‰ˆï¼ˆæ¨èï¼‰</h2>
  <p>ç¨³å®šç‰ˆæœ¬ï¼Œå·²é€šè¿‡å®Œæ•´æµ‹è¯•</p>
  <a href="https://github.com/yaotutu/droplink/releases/tag/main-latest">
    ä¸‹è½½æ­£å¼ç‰ˆ
  </a>

  <h2>å¼€å‘ç‰ˆ</h2>
  <p>åŒ…å«æœ€æ–°åŠŸèƒ½ï¼Œå¯èƒ½ä¸ç¨³å®š</p>
  <a href="https://github.com/yaotutu/droplink/releases/tag/dev-latest">
    ä¸‹è½½å¼€å‘ç‰ˆ
  </a>

  <h2>å†å²ç‰ˆæœ¬</h2>
  <p>æŸ¥çœ‹æ‰€æœ‰å†å²ç‰ˆæœ¬</p>
  <a href="https://github.com/yaotutu/droplink/releases">
    æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬
  </a>
</body>
</html>
```

### Markdown æ–‡æ¡£

```markdown
## ä¸‹è½½

### æ­£å¼ç‰ˆï¼ˆæ¨èï¼‰
ç¨³å®šç‰ˆæœ¬ï¼Œå·²é€šè¿‡å®Œæ•´æµ‹è¯•

[ä¸‹è½½æ­£å¼ç‰ˆ](https://github.com/yaotutu/droplink/releases/tag/main-latest)

### å¼€å‘ç‰ˆ
åŒ…å«æœ€æ–°åŠŸèƒ½ï¼Œå¯èƒ½ä¸ç¨³å®š

[ä¸‹è½½å¼€å‘ç‰ˆ](https://github.com/yaotutu/droplink/releases/tag/dev-latest)

### å†å²ç‰ˆæœ¬
[æŸ¥çœ‹æ‰€æœ‰ç‰ˆæœ¬](https://github.com/yaotutu/droplink/releases)
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### æ„å»ºå¤±è´¥

1. æ£€æŸ¥ Actions é¡µé¢çš„æ„å»ºæ—¥å¿—
2. ç¡®è®¤ `pnpm-lock.yaml` æ–‡ä»¶å·²æäº¤
3. ç¡®è®¤ `package.json` é…ç½®æ­£ç¡®
4. æ£€æŸ¥æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯æˆ–ä¾èµ–é—®é¢˜

### Release æœªåˆ›å»º

1. ç¡®è®¤ workflow æ–‡ä»¶ä¸­çš„ `permissions` é…ç½®æ­£ç¡®
2. ç¡®è®¤ `GITHUB_TOKEN` æœ‰è¶³å¤Ÿçš„æƒé™
3. æ£€æŸ¥ Actions é¡µé¢çš„é”™è¯¯ä¿¡æ¯

### ä¸‹è½½é“¾æ¥å¤±æ•ˆ

1. ç¡®è®¤ Release å·²æˆåŠŸåˆ›å»º
2. æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦æ­£ç¡®ï¼ˆç‰ˆæœ¬å·ä¼šå˜åŒ–ï¼‰
3. ä½¿ç”¨ Release é¡µé¢é“¾æ¥è€Œä¸æ˜¯ç›´æ¥æ–‡ä»¶é“¾æ¥

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [GitHub Actions å®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/actions)
- [softprops/action-gh-release](https://github.com/softprops/action-gh-release)
- [Plasmo å®˜æ–¹æ–‡æ¡£](https://docs.plasmo.com/)

---

## ğŸ‰ æ€»ç»“

é€šè¿‡è¿™ä¸‰ä¸ª workflowï¼Œä½ å¯ä»¥ï¼š

1. âœ… è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒ Dev å’Œ Main ç‰ˆæœ¬
2. âœ… ä½¿ç”¨å›ºå®šä¸‹è½½é“¾æ¥ï¼Œæ— éœ€æ¯æ¬¡æ›´æ–°
3. âœ… åˆ›å»ºç‰ˆæœ¬åŒ– Releaseï¼Œæ°¸ä¹…ä¿ç•™é‡è¦ç‰ˆæœ¬
4. âœ… åœ¨ä¸‹è½½é¡µé¢æä¾›ç¨³å®šçš„ä¸‹è½½é“¾æ¥

**å›ºå®šä¸‹è½½é“¾æ¥**ï¼š
- Dev å¼€å‘ç‰ˆï¼š`https://github.com/yaotutu/droplink/releases/tag/dev-latest`
- Main æ­£å¼ç‰ˆï¼š`https://github.com/yaotutu/droplink/releases/tag/main-latest`

ç°åœ¨ä½ å¯ä»¥å°†è¿™äº›é“¾æ¥æ·»åŠ åˆ°ä½ çš„ä¸‹è½½é¡µé¢äº†ï¼ğŸ‰
